extends _shared/base/layout
include _shared/mixins/navigation

block js
    script(src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js")
    script(src='/public/js/compiler.js')

block navigation
    +nav(user, '/')

block content
    h1.text-center #{task.name}
    form.col-md-8(id='compilerform' action='/compiler/' + task._id, method='post')
        .col
            label Input:
                textarea#input(form='compilerform' wrap='hard' rows=10 cols=50 required='required' name='input')   
        .col.btn-toolbar
            .btn-group
                button#submit.btn.btn-primary(type='button', data-toggle='modal', data-target='#results-modal') Submit
                button#results.btn.btn-primary(type='button', data-toggle='modal', data-target='#results-modal') Results
                button#description.btn.btn-primary(type='button', data-toggle='modal', data-target='#description-modal') Description
                a#submissions.btn.btn-primary(href='/usersubmissions', role='button', data-toggle='tooltip', data-placement='bottom', data-original-title='Go to your previous submissions') Submissions
            .btn-group
                button#edit.btn.btn-primary(type='button') Edit
                button#delete.btn.btn-danger(type='button') Delete
    .col-md-4
        .col
            h1 
                | Ranking
            table.table.table-hover.table-striped.table-bordered
                thead
                    tr
                        th #
                        th Username
                        th Result
                tbody
                    tr
                        th(scope='row') 1
                        td Mark
                        td 0 / #{task.results.length * 10}
                    tr
                        th(scope='row') 2
                        td Jacob
                        td 0 / #{task.results.length * 10}

    #results-modal.modal.fade(tabindex='-1', role='dialog', aria-labelledby='results-title', aria-hidden='true')
        .modal-dialog(role='document')
            .modal-content
                .modal-header
                    button.close(type='button', data-dismiss='modal', aria-label='Close')
                        span(aria-hidden='true') ×
                    h4#results-title.modal-title Results
                .modal-body
                .modal-footer
                    a.btn.btn-secondary.pull-left(href='/catalogue', role='button', data-toggle='tooltip', data-placement='bottom', data-original-title='Go to catalogue') Catalogue
                    button.btn.btn-default(type='button', data-dismiss='modal') Close        
    #description-modal.modal.fade(tabindex='-1', role='dialog', aria-labelledby='description-modal-title', aria-hidden='true')
        .modal-dialog(role='document')
            .modal-content
                .modal-header
                    h5#description-modal-title.modal-title #{task.name}
                    button.close(type='button', data-dismiss='modal', aria-label='Close')
                        span(aria-hidden='true') ×
                .modal-body
                    != md(task.description)
                .modal-footer
                    button.btn.btn-secondary(type='button', data-dismiss='modal') Close     